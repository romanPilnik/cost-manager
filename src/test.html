<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Test idb.js</title>
</head>
<body>
    <h1>Check the Console (F12) to see results</h1>
    <script src="idb.js"></script>
    <script>
        async function test() {
            try {
                // 1. ×¤×ª×™×—×ª ×‘×¡×™×¡ ×”× ×ª×•× ×™×
                const db = await idb.openCostsDB("costsdb", 1);
                if (db) {
                    console.log("âœ… creating db succeeded");
                }

                // 2. ×”×•×¡×¤×ª ×¤×¨×™×˜ ×”×•×¦××” ×¨××©×•×Ÿ
                const result1 = await db.addCost({
                    sum: 200, 
                    currency: "USD", 
                    category: "FOOD", 
                    description: "pizza"
                });
                if (result1) {
                    console.log("âœ… adding 1st cost item succeeded", result1);
                }

                // 3. ×”×•×¡×¤×ª ×¤×¨×™×˜ ×”×•×¦××” ×©× ×™
                const result2 = await db.addCost({
                    sum: 400, 
                    currency: "USD", 
                    category: "CAR", 
                    description: "fuel"
                });
                if (result2) {
                    console.log("âœ… adding 2nd cost item succeeded", result2);
                }

                // 4. ×‘×“×™×§×ª ×”×¤×§×ª ×“×•×— (×‘×•× ×•×¡ ×œ×‘×“×™×§×” ×©×œ×š)
                const currentMonth = new Date().getMonth() + 1;
                const currentYear = new Date().getFullYear();
                const report = await db.getReport(currentYear, currentMonth, "USD");
                console.log("ğŸ“Š Report Result:", report);

            } catch (error) {
                console.error("âŒ Test failed:", error);
            }
        }
        test();
    </script>
</body>
</html>